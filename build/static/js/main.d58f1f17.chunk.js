(this["webpackJsonpsecret-chat-ui"]=this["webpackJsonpsecret-chat-ui"]||[]).push([[0],{137:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(51),c=n.n(r),a=n(30),i=n(65),s=n(167),l=n(166),d=n(40),u=n(32),b=n(2),j=function(){return Object(b.jsx)(u.a,{styles:"\n      /* Copied from https://fonts.googleapis.com/css2?family=Open+Sans:wght@700&family=Roboto+Mono&display=swap */\n      /* latin-ext */\n      @font-face {\n        font-family: 'Open Sans';\n        font-style: normal;\n        font-weight: 700;\n        font-display: swap;\n        src: url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN7rgOXOhpOqc.woff2) format('woff2');\n        unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;\n      }\n      /* latin */\n      @font-face {\n        font-family: 'Open Sans';\n        font-style: normal;\n        font-weight: 700;\n        font-display: swap;\n        src: url(https://fonts.gstatic.com/s/opensans/v18/mem5YaGs126MiZpBA-UN7rgOUuhp.woff2) format('woff2');\n        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\n      }\n      /* latin-ext */\n      @font-face {\n        font-family: 'Roboto Mono';\n        font-style: normal;\n        font-weight: 400;\n        font-display: swap;\n        src: url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SuW4Ep0.woff2) format('woff2');\n        unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;\n      }\n      /* latin */\n      @font-face {\n        font-family: 'Roboto Mono';\n        font-style: normal;\n        font-weight: 400;\n        font-display: swap;\n        src: url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_ROW4.woff2) format('woff2');\n        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\n      }\n      "})},h=n(14),g=Object(i.b)({name:"user",initialState:{logged:!1,token:null},reducers:{loginAction:function(e,t){var n=t.payload.token;e.logged=!0,e.token=n},logoutAction:function(e,t){e.logged=!1,e.token=null}}}),x=g.actions,m=x.loginAction,f=x.logoutAction,O=g.reducer,p=n(19),w=n.n(p),v=n(33),k=n(7),y=n(139),U=n(146),C=n(148),S=n(149),F=n(42),D=n(150),_=n(168),T=n(103),A=n(48),R=n.n(A),B="https://jakki-secret-chat.herokuapp.com/",M=function(){var e=Object(v.a)(w.a.mark((function e(t,n){var o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.a.post("".concat(B,"/login"),{username:t,password:n});case 3:return o=e.sent,console.log(o),e.abrupt("return",o.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(v.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.prev=1,e.next=4,R.a.get("".concat(B,"/user"),{headers:{Authorization:"JWT ".concat(t)}});case 4:return n=e.sent,console.log(n),console.log(n.data),e.abrupt("return",n.data);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();var W={login:M},I=Object(a.b)((function(e){return{user:e.user}}),W)((function(e){var t=Object(h.g)(),n=Object(o.useState)(""),r=Object(k.a)(n,2),c=r[0],i=r[1],s=Object(o.useState)(""),l=Object(k.a)(s,2),d=l[0],u=l[1],j=Object(a.c)(),g=function(){var e=Object(v.a)(w.a.mark((function e(n){var o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log("Email: ".concat(c," & Password: ").concat(d)),e.next=4,M(c,d);case 4:o=e.sent,localStorage.setItem("token",o.access_token),j(m({token:o.access_token})),t.push("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=Object(y.c)("white","gray.800");return Object(b.jsx)(U.a,{align:"center",justifyContent:"center",maxW:"100%",maxH:"100%",p:10,rounded:"md",bgColor:x,m:5,boxShadow:"md",children:Object(b.jsxs)(C.a,{p:8,maxWidth:"500px",borderWidth:1,borderRadius:8,boxShadow:"lg",children:[Object(b.jsx)(C.a,{textAlign:"center",children:Object(b.jsx)(S.a,{children:"Login"})}),Object(b.jsx)(C.a,{my:4,textAlign:"left",children:Object(b.jsxs)("form",{onSubmit:g,children:[Object(b.jsxs)(F.a,{isRequired:!0,children:[Object(b.jsx)(D.a,{children:"Username"}),Object(b.jsx)(_.a,{type:"text",placeholder:"mystery-user-1",onChange:function(e){return i(e.currentTarget.value)}})]}),Object(b.jsxs)(F.a,{mt:6,isRequired:!0,children:[Object(b.jsx)(D.a,{children:"Password"}),Object(b.jsx)(_.a,{type:"password",placeholder:"*******",onChange:function(e){return u(e.currentTarget.value)}})]}),Object(b.jsx)(T.a,{width:"full",color:"teal",mt:4,type:"submit",children:"Sign In"})]})})]})})})),z=n(155),H=n(156),J=n(169),G=n(157),L=n(158),q=n(153),N=n(159),Y=n(160),P=n(151),V=n(152),X=n(154);var Z=function(e){return Object(b.jsxs)(U.a,{justifyContent:e.justifyContent,width:"100%",children:[Object(b.jsxs)(C.a,{display:"flex",boxShadow:"md",bgColor:"white",m:"3",p:"3",borderRadius:"20px",children:[Object(b.jsx)(P.a,{mr:3,p:1,children:e.content}),Object(b.jsx)(V.a,{}),Object(b.jsx)(P.a,{fontSize:"xs",alignSelf:"flex-end",children:"12:24"})]}),Object(b.jsx)(q.a,{alignSelf:"center",color:"gray.200",bgColor:"transparent","aria-label":"Options",icon:Object(b.jsx)(X.a,{})})]})};var K=function(e){var t=Object(o.useState)([]),n=Object(k.a)(t,2),r=n[0],c=n[1],a=Object(o.useRef)(null),i=function(){return console.log("Scrolling")&&a.current.scrollIntoView()};Object(o.useEffect)((function(){c([{id:1,content:"Testing content",datetime:new Date,user_id:1},{id:2,content:"Testing content2",datetime:new Date,user_id:2},{id:3,content:"Testing content3",datetime:new Date,user_id:2},{id:4,content:"Testing long long long long long long long long long long long long long long long long long long long long long long long content4",datetime:new Date,user_id:1},{id:5,content:"Testing content5",datetime:new Date,user_id:1},{id:6,content:"Testing content6",datetime:new Date,user_id:2},{id:7,content:"Testing content7",datetime:new Date,user_id:1},{id:8,content:"Testing content8",datetime:new Date,user_id:1},{id:9,content:"Testing content9",datetime:new Date,user_id:2},{id:10,content:"Testing content10",datetime:new Date,user_id:1},{id:11,content:"Testing content11",datetime:new Date,user_id:1},{id:12,content:"Testing content12",datetime:new Date,user_id:2},{id:13,content:"Testing content13",datetime:new Date,user_id:1},{id:14,content:"Testing content14",datetime:new Date,user_id:1},{id:15,content:"Testing content15",datetime:new Date,user_id:2},{id:16,content:"Testing content16",datetime:new Date,user_id:1},{id:17,content:"Testing content17",datetime:new Date,user_id:1},{id:18,content:"Testing content18",datetime:new Date,user_id:2},{id:19,content:"Testing content19",datetime:new Date,user_id:1},{id:20,content:"Testing content20",datetime:new Date,user_id:1},{id:21,content:"Testing content21",datetime:new Date,user_id:2},{id:22,content:"Testing content22",datetime:new Date,user_id:1},{id:23,content:"Testing content23",datetime:new Date,user_id:1},{id:24,content:"Testing content24",datetime:new Date,user_id:2},{id:25,content:"Testing content25",datetime:new Date,user_id:1}]),setTimeout(i,1e3)}),[]),console.log(e);var s=function(){alert("Enter hit! Send!")},l=Object(y.c)("white","gray.800");return Object(b.jsxs)(U.a,{maxW:"100%",maxH:"100%",boxShadow:"sm",rounded:"md",bgColor:l,m:2,flexDirection:"column",children:[Object(b.jsxs)(C.a,{display:"flex",borderTopRadius:"md",alignItems:"center",justifyContent:"center",m:0,p:0,bgColor:"teal",maxW:"100%",height:"70px",textAlign:"center",children:[Object(b.jsx)(z.a,{size:"md",name:"Dan Abrahmov",src:"https://bit.ly/dan-abramov",mr:"3"}),Object(b.jsx)(S.a,{as:"h4",size:"md",color:"white",children:"User"})]}),Object(b.jsxs)(H.a,{maxW:"100%",height:"75vh",overflowY:"scroll",bgColor:"gray.50",css:{"::-webkit-scrollbar":{width:"5px",borderRadius:"10px"},"::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"10px"},"::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"10px"},"::-webkit-scrollbar-thumb:hover":{background:"#555"}},children:[r.map((function(e){return Object(b.jsx)(H.b,{width:"100%",justifyContent:1===e.user_id?"flex-end":"flex-start",children:Object(b.jsx)(Z,{content:e.content,justifyContent:1===e.user_id?"flex-end":"flex-start"})},e.id)})),Object(b.jsx)(H.b,{ref:a,children:"Bottom"})]}),Object(b.jsx)(C.a,{maxW:"100%",height:"40px",children:Object(b.jsx)(J.a,{spacing:4,children:Object(b.jsxs)(G.a,{children:[Object(b.jsx)(L.a,{pointerEvents:"none",children:Object(b.jsx)(N.a,{color:"gray.300"})}),Object(b.jsx)(_.a,{size:"md",placeholder:"Message",focusBorderColor:"teal.500",onKeyPress:function(e){return"Enter"===e.key&&s()}}),Object(b.jsx)(L.b,{children:Object(b.jsx)(q.a,{borderTopRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"md",colorScheme:"teal","aria-label":"Send",icon:Object(b.jsx)(Y.a,{}),onClick:function(){return s()}})})]})})})]})},Q=function(e){return Object(b.jsx)("span",{className:"emoji",role:"img","aria-label":e.label?e.label:"","aria-hidden":e.label?"false":"true",children:e.symbol})},$=function(){var e=Object(v.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.prev=1,e.next=4,R.a.get("".concat("https://jakki-secret-chat.herokuapp.com/","/chatroom"),{headers:{Authorization:"JWT ".concat(t)}});case 4:return n=e.sent,console.log(n),console.log(n.data),e.abrupt("return",n.data);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();var ee=function(e){var t=Object(o.useState)([]),n=Object(k.a)(t,2),r=n[0],c=n[1],a=Object(o.useState)([]),i=Object(k.a)(a,2),s=i[0],l=i[1];Object(o.useEffect)(Object(v.a)(w.a.mark((function e(){var t,n,o,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:return t=e.sent,n=t.data,e.next=6,$();case 6:return o=e.sent,r=o.data,e.next=10,c(n);case 10:return e.next=12,l(r);case 12:case"end":return e.stop()}}),e)}))),[]);var d=Object(y.c)("white","gray.800");return Object(y.c)("#123123","#643345"),Object(b.jsxs)(U.a,{maxW:"100%",maxH:"100%",p:2,boxShadow:"sm",rounded:"md",bgColor:d,m:2,children:[Object(b.jsxs)(C.a,{flexGrow:"1",textAlign:"center",children:[Object(b.jsxs)(S.a,{as:"h3",size:"lg",children:[Object(b.jsx)(Q,{symbol:"\ud83d\udc65"})," Join a room!"]}),Object(b.jsx)(H.a,{maxHeight:"80vh",overflowY:"scroll",spacing:3,m:1,p:3,css:{"::-webkit-scrollbar":{width:"5px",borderRadius:"10px"},"::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"10px"},"::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"10px"},"::-webkit-scrollbar-thumb:hover":{background:"#555"}},children:s.map((function(e){return Object(b.jsx)(H.b,{children:Object(b.jsx)(T.a,{size:"md",height:"48px",width:"100%",border:"2px",borderColor:"teal",as:"a",href:"/chatroom/"+e.id,children:e.name})},e.id)}))})]}),Object(b.jsxs)(C.a,{flexGrow:"1",textAlign:"center",children:[Object(b.jsxs)(S.a,{as:"h3",size:"lg",children:[Object(b.jsx)(Q,{symbol:"\ud83e\udd2b"})," Private chat!"]}),Object(b.jsx)(H.a,{maxHeight:"80vh",overflowY:"scroll",spacing:3,m:1,p:3,css:{"::-webkit-scrollbar":{width:"5px",borderRadius:"10px"},"::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"10px"},"::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"10px"},"::-webkit-scrollbar-thumb:hover":{background:"#555"}},children:r.map((function(e){return Object(b.jsx)(H.b,{children:Object(b.jsx)(T.a,{size:"md",height:"48px",width:"100%",border:"2px",borderColor:"teal",as:"a",href:"/chatroom/private/"+e.id,children:e.username})},e.id)}))})]})]})},te=n(79),ne=n(163),oe=n(161),re=n(162);var ce=function(){var e=Object(y.b)(),t=e.colorMode,n=e.toggleColorMode;return Object(b.jsx)("div",{style:{display:"show"},children:Object(b.jsx)(C.a,{textAlign:"right",py:4,mr:12,children:Object(b.jsx)(q.a,{icon:"light"===t?Object(b.jsx)(oe.a,{}):Object(b.jsx)(re.a,{}),onClick:n})})})};var ae={logoutAction:f},ie=Object(a.b)((function(e){return{user:e.user}}),ae)((function(e){var t=Object(a.c)(),n=Object(h.g)(),o=Object(y.c)("white","gray.800");return Object(b.jsxs)(U.a,{align:"center",p:2,boxShadow:"md",borderBottomRadius:"md",bgColor:o,children:[Object(b.jsx)(C.a,{as:"button",p:"2",onClick:function(){n.push("/")},outline:"0",children:Object(b.jsx)(ne.a,{src:"/logo_200.png",alt:"Secret Chat",htmlHeight:"100px",htmlWidth:"150px"})}),Object(b.jsx)(V.a,{}),e.user.logged?Object(b.jsx)(T.a,{mr:4,colorScheme:"teal",onClick:function(){return t(f()),localStorage.removeItem("token"),void n.push("/login")},children:"Log out"}):Object(b.jsx)(T.a,{mr:4,colorScheme:"teal",onClick:function(){n.push("/login")},children:"Log in"}),Object(b.jsx)(ce,{})]})})),se=n(164);var le=function(e){var t=Object(y.c)("teal","gray.800");return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(se.a,{bgColor:t,h:"60px",color:"white",mt:"auto",borderTopRadius:"md",boxShadow:"md",children:Object(b.jsx)(P.a,{fontSize:"lg",children:"Made with \ud83d\udc96 from Helsinki"})})})};var de=function(e){var t=Object(y.c)("gray.200","gray.900");return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(C.a,{width:"100vw",height:"100vh",maxWidth:"100vw",maxHeight:"100vh",mx:"auto",bgColor:t,backgroundImage:"url('/bg.svg')",children:Object(b.jsxs)(U.a,Object(te.a)(Object(te.a)({direction:"column",maxW:{xl:"1200px"},height:"100%",m:"0 auto"},e),{},{children:[Object(b.jsx)(ie,{}),Object(b.jsx)(C.a,{flex:"1 0 auto",children:e.children}),Object(b.jsx)(le,{flexShrink:"0"})]}))})})};var ue=function(e){var t=Object(y.c)("white","gray.800");return Object(b.jsx)(U.a,{align:"center",justifyContent:"center",maxW:"100%",maxH:"100%",p:2,boxShadow:"sm",rounded:"md",bgColor:t,m:2,children:Object(b.jsxs)("div",{children:[Object(b.jsx)(ne.a,{}),Object(b.jsx)(P.a,{fontSize:"3xl",children:"404 Not found"})]})})};var be=Object(a.b)((function(e){return{user:e.user}}),null)((function(e){var t=Object(a.c)(),n=function(){return!(!e.user.token&&!localStorage.getItem("token"))&&(e.user.token?localStorage.getItem("token")||localStorage.setItem("token",e.user.token):t(m({token:localStorage.getItem("token")})),!0)},o=Object(h.h)("/chatroom/:id"),r=Object(h.h)("/chatroom/private/:id"),c=!!r;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(h.d,{children:[Object(b.jsx)(h.b,{path:["/chatroom/:id","/chatroom/private/:id"],children:function(){return n()?Object(b.jsx)(de,{children:Object(b.jsx)(K,{private:c,id:Number(c?r.params.id:o.params.id)})}):Object(b.jsx)(h.a,{to:"/login"})}}),Object(b.jsx)(h.b,{path:"/login",children:function(){return n()?Object(b.jsx)(h.a,{to:"/"}):Object(b.jsx)(de,{children:Object(b.jsx)(I,{})})}}),Object(b.jsx)(h.b,{exact:!0,path:"/",children:function(){return n()?Object(b.jsx)(de,{children:Object(b.jsx)(ee,{})}):Object(b.jsx)(h.a,{to:"/login"})}}),Object(b.jsx)(h.b,{children:Object(b.jsx)(de,{children:Object(b.jsx)(ue,{})})})]})})})),je=n(22),he=Object(je.c)({user:O}),ge=(n(137),n(165)),xe=Object(ge.a)({fonts:{heading:"Open Sans",body:"Roboto Mono"},config:{initialColorMode:"light",useSystemColorMode:!1}}),me=Object(i.a)({reducer:he}),fe=document.getElementById("root");c.a.render(Object(b.jsxs)(s.a,{theme:xe,children:[Object(b.jsx)(l.a,{initialColorMode:xe.config.initialColorMode}),Object(b.jsx)(j,{}),Object(b.jsx)(a.a,{store:me,children:Object(b.jsx)(d.a,{children:Object(b.jsx)(be,{})})})]}),fe)}},[[138,1,2]]]);
//# sourceMappingURL=main.d58f1f17.chunk.js.map